\documentclass[a4paper,12pt]{article}
\setlength{\parindent}{0cm}
\usepackage{amsmath, amssymb, amsthm, mathtools,pgfplots}
\usepackage{graphicx,caption}
\usepackage{verbatim}
\usepackage{venndiagram}
\usepackage[cm]{fullpage}
\usepackage{fancyhdr}
\usepackage{tikz}
\usepackage{listings}
\usepackage{color,enumerate,framed}
\usepackage{color,hyperref}
\definecolor{darkblue}{rgb}{0.0,0.0,0.5}
\hypersetup{colorlinks,breaklinks,
            linkcolor=darkblue,urlcolor=darkblue,
            anchorcolor=darkblue,citecolor=darkblue}

%\usepackage{tgadventor}
%\usepackage[nohug]{diagrams}
\usepackage[T1]{fontenc}
%\usepackage{helvet}
%\renewcommand{\familydefault}{\sfdefault}
%\usepackage{parskip}
%\usepackage{picins} %for \parpic.
%\newtheorem*{notation}{Notation}
%\newtheorem{example}{Example}[section]
%\newtheorem*{problem}{Problem}
\theoremstyle{definition}
%\newtheorem{theorem}{Theorem}
%\newtheorem*{solution}{Solution}
%\newtheorem*{definition}{Definition}
%\newtheorem{lemma}[theorem]{Lemma}
%\newtheorem{corollary}[theorem]{Corollary}
%\newtheorem{proposition}[theorem]{Proposition}
%\newtheorem*{remark}{Remark}
%\setcounter{section}{1}

\newtheorem{thm}{Theorem}[section]
\newtheorem{lemma}[thm]{Lemma}
\newtheorem{prop}[thm]{Proposition}
\newtheorem{cor}[thm]{Corollary}
\newtheorem{defn}[thm]{Definition}
\newtheorem*{examp}{Example}
\newtheorem{conj}[thm]{Conjecture}
\newtheorem{rmk}[thm]{Remark}
\newtheorem*{nte}{Note}
\newtheorem*{notat}{Notation}

%\diagramstyle[labelstyle=\scriptstyle]

\lstset{frame=tb,
  language=Oz,
  aboveskip=3mm,
  belowskip=3mm,
  showstringspaces=false,
  columns=flexible,
  basicstyle={\small\ttfamily},
  breaklines=true,
  breakatwhitespace=true,
  tabsize=3
}


\pagestyle{fancy}




\fancyhead{}
\renewcommand{\headrulewidth}{0pt}

\lfoot{\color{black!60}{\sffamily Zhangsheng Lai}}
\cfoot{\color{black!60}{\sffamily Last modified: \today}}
\rfoot{\textsc{\thepage}}



\begin{document}
\flushright{Zhangsheng Lai\\1002554}
\section*{Real Analysis: Homework 1}

\begin{enumerate}

\item
\begin{enumerate}
\item $\mathbb{R}$ is second-countable by considering the countable basis 
\begin{align*}
\mathcal{B}:=\{(a,b)| a<b, a,b \in \mathbb{Q}\}
\end{align*}
We now claim that $\mathcal{B}^n = \{U_1\times \ldots\times U_n)|\text{ each }U_i\in \mathcal{B}\text{ for }i=1,\ldots, n\}$ is a countable basis for $\mathbb{R}^n$. It is clear that $\mathcal{B}^n$ is countable as the Cartesian product of countable sets is still countable. To show $\mathcal{B}^n$ is a basis for $\mathbb{R}^n$:
\begin{enumerate}[(1)]
\item Pick $x = (x_1\ldots, x_n) \in \mathbb{R}^n$ and consider the projection map $\pi_i: \mathbb{R}^n \to \mathbb{R}$, $(x_1\ldots, x_n) \mapsto x_i$. Thus for each $\pi_i(x) = x_i$ we can find $B_i \in \mathcal{B}$ such that $x_i \in B_i$. Thus $B_1 \times \ldots \times B_n$ is the basis element in $\mathcal{B}^n$ containing $x$.
\item Let $x$ belong to the intersection of two basis elements $U = B_1 \times \ldots \times B_n, U' = B'_1 \times \ldots \times B'_n$. Using the projection map, $\pi_i(U) = B_i, \pi_i(U') = B'_i$ and thus there is a basis element $A_i \subseteq B_i \cap B'_i$ for some $A_i \in \mathcal{B}$. Thus $A = A_i \times \ldots \times A_n$ is the basis element in $\mathcal{B}^n$ such that $A \subseteq U \cap U'$.
\end{enumerate}
Thus we have shown that $\mathcal{B}^n$ is a countable basis for $\mathbb{R}^n$.



\item Let $U$ be an open set of $\mathbb{R}$. If $U$ is a union of countably many open sets we can simply pick the disjoint open intervals from that union and we are done. Suppose $U$ is an uncountable union of open sets, and without loss of generality assume that they are disjoint, $U = \sqcup_{\alpha \in A}V_\alpha$ for uncountable $A$, then since $\mathbb{R}$ is second-countable, there exists a countable basis $\mathcal{B}$ for $\mathbb{R}$. Thus for each $x \in V_\alpha$, there exists $B_x \in \mathcal{B}$ such that $x \in B_x \subseteq V_\alpha$. Consider the set 
\begin{align*}
\left\{\bigcup_{x\in V_\alpha} B_x \text{ for all }\alpha \in A\right\}
\end{align*}


we claim that this set is at most countable and is a disjoint set of open intervals. Every element of the set is open since it is a union of $B \in \mathcal{B}$. It is disjoint since by construction $V_\alpha = \bigcup_{x\in V_\alpha} B_x$. Lastly, suppose that the set above is uncountable, then since there are countably many $B \in \mathcal{B}$, $\left(\bigcup_{x\in V_{\alpha_1}}B_x\right) \cap \left(\bigcup_{x\in V_{\alpha_2}}B_x\right)  = V_{\alpha_1} \cap V_{\alpha_2} \neq \varnothing$ for some distinct $\alpha_1, \alpha_2$ which contradicts the earlier assumption.

\end{enumerate}

\item Let $f : (X, \tau_X) \to (Y, \tau_Y)$ be a continuous function. Let $(X,\tau'_X)$ be a finer topology than $(X, \tau_X)$ then $\tau'_X \supseteq \tau_X$. Thus for any $U \in \tau_Y$, $f^{-1}(U) \in \tau_X \subseteq \tau'_X$. Thus $f^{-1}(U) \in \tau'_X$ and $f : (X, \tau'_X) \to (Y, \tau_Y)$ remains continuous. Let $(Y,\tau'_Y)$ is a topology coarser than $(Y, \tau_Y)$ and so $\tau_Y \supseteq\tau'_Y$. Hence for $U \in \tau'_Y \subseteq \tau_Y$, we have $f^{-1}(U)\in \tau_X$. Thus  $f : (X, \tau_X) \to (Y, \tau'_Y)$ remains continuous.

\item We shall show that $\int_{\mathbb{R}}e^{-x^2/2}\,dx = \sqrt{2\pi}$. Start by considering its square,
\begin{align*}
\left(\int_{\mathbb{R}}e^{-x^2/2}\,dx\right)^2 &= \left(\int_{\mathbb{R}}e^{-x^2/2}\,dx\right)\left(\int_{\mathbb{R}}e^{-y^2/2}\,dy\right)\\
&=\int_{\mathbb{R}^2}e^{-\frac{x^2+y^2}{2}}\,dydx\\
& = \int_{0}^{2\pi}\int_{0}^{\infty}e^{-r^2/2}r \,drd\theta \quad\text{   by polar change of coordinates.}\\
&= 2\pi \int_{0}^{\infty}e^{-r^2/2}r \,dr \\
&=2\pi \int_{0}^{\infty}\frac{1}{2}e^{-s/2} \,ds\quad \text{ change of coordinates, $s = r^2$}\\
&=\pi \Big[-2e^{-s/2}\Big]_{0}^{\infty} = 2\pi
\end{align*}
which shows what is required and hence $\frac{1}{\sqrt{2\pi}}\int_{\mathbb{R}}e^{-x^2/2}\,dx=1$.



\item Let $x_n >0$ for all $n$ and $x_n \to a$ with $a >0$. Since $f(x) = \log x$ is a continuous function, it suffices to show
\begin{align*}
\frac{1}{n^2}\sum_{k=1}^{n}k\log x_k \to \frac{1}{2}\log a
\end{align*}
%Given $\epsilon >0$, there exists $N \in \mathbb{Z}_{>0}$ such that for all $n \geq N$, $\log x_n \in B(\log a,\epsilon)$, an epsilon ball centered at $\log a$.
Consider the sequence $s_n:=\frac{1}{n^2}\sum_{i=1}^{n}i\log x_i$. Then for some positive integer $k$, there exists $N_1$ such that 
\begin{align*}
s_n = \frac{1}{n^2}\sum_{i=1}^{k}i\log x_i+\frac{1}{n^2}\sum_{i=k+1}^{n}i\log x_i \to \frac{1}{n^2}\sum_{i=k+1}^{n}i\log x_i 
\end{align*}
for $n \geq N_1$. Since $\log x_n \to \log a$, $\limsup_{n\to \infty} \log x_n = \lim_{n\to \infty} \log x_n = \log a$. Thus there exists $N_2$ such that we have $\log x_n < \log a + \epsilon$ for $n \geq N_2$ and arbitrary $\epsilon >0$. Taking $N = \max\{N_1, N_2\}$, for $n \geq N$,
\begin{align*}
s_n \leq \frac{1}{n^2}\sum_{i=k+1}^{n}i(\log a + \epsilon) = (\log a + \epsilon)\frac{n^2-k^2+n+k}{2n^2}
\end{align*}
Then $\limsup_{n\to\infty}s_n \leq \limsup_{n\to\infty}\frac{1}{n^2}\sum_{i=k+1}^{n}i(\log a + \epsilon) = \frac{1}{2}(\log a + \epsilon)$. In a similar fashion, we have $\liminf_{n\to\infty}\log x_n = \log a$ and there exists $N_3$ such that $\log x_n > \log a - \epsilon$ for $n \geq N_3$ and arbitrary $\epsilon >0$. Taking $M =\max\{N_1,N_3\}$, for $n \geq M$,
\begin{align*}
s_n \geq \frac{1}{n^2}\sum_{i=k+1}^{n}i(\log a - \epsilon) = (\log a - \epsilon)\frac{n^2-k^2+n+k}{2n^2}
\end{align*}
Then $\liminf_{n\to\infty} s_n \geq \liminf_{n\to\infty}\frac{1}{n^2}\sum_{i=k+1}^{n}i(\log a - \epsilon) = \frac{1}{2}(\log a -\epsilon)$. As $\epsilon$ is arbitrarily chosen we have $\limsup_{n\to\infty} s_n=\frac{1}{2}\log a = \liminf_{n\to\infty}s_n$, this $s_n \to \frac{1}{2}\log a$.


% Let $s = \limsup_{n\to \infty}s_n$, for any $\epsilon >0$, then there exists $N_2$ such that we have $s_n < s + \epsilon$ for $n \geq N_2$. Taking $N = \max\{N_1, N_2\}$,
%\begin{align*}
%\frac{1}{n^2}\sum_{i=k+1}^{n}i\log x_i < s + \epsilon
%\end{align*}
%Then since $f(x) =  x^n, g(x) = \log x$ for $n \in \mathbb{Z}_{>0}$ are continuous functions, it suffice to prove that 
%\begin{align*}
%\lim_{n\to \infty}\frac{1}{n}\sum_{k=1}^{n}k\log x_k = \log a
%\end{align*}
%Denote $s_n:=\frac{1}{n}\sum_{k=1}^{n}k\log x_k$, then
%\begin{align*}
%s_{n+1} &= \left(\frac{1}{n}\sum_{k=1}^{n}k\log x_k\right)\frac{n}{n+1}+\log x_{n+1}= \frac{n}{n+1}s_n+\log x_{n+1}
%\end{align*}
%
%
%We claim the following:
%\begin{align*}
%\limsup_{n\to\infty}\frac{1}{n}\sum_{k=1}^{n}k\log x_k &\leq \limsup_{n \to \infty} \log x_n = \log a\\
%\liminf_{n\to\infty}\frac{1}{n}\sum_{k=1}^{n}k\log x_k &\geq \liminf_{n \to \infty} \log x_n = \log a
%\end{align*}
%which shows the required. To show the claim,
%\begin{align*}
%\limsup_{n\to\infty}\frac{1}{n}\sum_{k=1}^{n}k\log x_k := \lim_{n\to\infty}\left(\sup_{m\geq n}\frac{1}{n}\sum_{k=1}^{n}k\log x_k\right) = 
%\end{align*}


\item We first observe that 
\begin{align*}
\int_{0}^{1}f(x)\,dx = \sum_{j=0}^{n-1}\int_{j/n}^{j+1/n}f(x)\,dx
\end{align*}
thus
\begin{align*}
\left|\sum_{j=0}^{n-1}\frac{f\left(j/n\right)}{n}-\int_{0}^{1}f(x)\,dx\right|&=\left|\sum_{j=0}^{n-1}\int_{j/n}^{(j+1)/n}f\left(j/n\right)-f(x)\,dx\right|\\
&=\left|\sum_{j=0}^{n-1}\int_{j/n}^{(j+1)/n}(j/n-x)\cdot\frac{f\left(j/n\right)-f(x)}{j/n-x}\,dx\right|\\
&\leq M\left|\sum_{j=0}^{n-1}\int_{j/n}^{(j+1)/n}(j/n-x)\,dx\right| \text{ by MVT for integrals and then MVT}\\ 
&= M \left|\sum_{j=0}^{n-1}-\frac{1}{2}\left(\frac{j}{n}-\frac{j+1}{n}\right)^2\right|\\
%&=\frac{M}{2n^2}\left|\sum_{j=0}^{n-1}1\right|
&=\frac{M}{2n}
\end{align*}

\end{enumerate}












\end{document}